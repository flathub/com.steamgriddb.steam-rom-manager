{
	"app-id": "com.steamgriddb.steam-rom-manager",
	"default-branch": "stable",
	"runtime": "org.freedesktop.Sdk",
	"runtime-version": "21.08",
	"sdk": "org.freedesktop.Sdk",
	"base": "org.electronjs.Electron2.BaseApp",
	"base-version": "21.08",
	"command": "steam-rom-manager",
	"separate-locales": false,
	"finish-args": [
		"--require-version=0.10.3",
		"--share=ipc",
		"--socket=x11",
		"--socket=pulseaudio",
		"--socket=ssh-auth",
		"--share=network",
		"--device=all",
		"--filesystem=xdg-config/gtk-3.0",
		"--filesystem=host",
		"--allow=devel",
		"--talk-name=org.freedesktop.Notifications",
		"--talk-name=org.freedesktop.secrets",
		"--talk-name=org.freedesktop.Flatpak",
		"--env=ZYPAK_SPAWN_LATEST_ON_REEXEC=0",
		"--filesystem=xdg-config/kdeglobals:ro",
		"--talk-name=com.canonical.AppMenu.Registrar",
		"--talk-name=com.canonical.AppMenu.Registrar.*",
		"--system-talk-name=org.freedesktop.login1"
	],
	"cleanup": [
		"/include",
		"/lib/pkgconfig",
		"/share/gtk-doc",
		"*.la"
	],
	"modules": [
		{
			"name": "zypak",
			"sources": [
				{
					"type": "git",
					"url": "https://github.com/refi64/zypak",
					"tag": "v2022.03",
					"commit": "8424c6bcf909ca2031ebc6537d324bb64772266e"
				}
			]
		},
		{
			"name": "steam-rom-manager",
			"buildsystem": "simple",
			"build-commands": [
				"install -D run.sh /app/bin/steam-rom-manager",
				"install -Dm644 srm_16.png /app/share/icons/hicolor/16x16/apps/com.steamgriddb.steam-rom-manager.png",
				"install -Dm644 srm_32.png /app/share/icons/hicolor/32x32/apps/com.steamgriddb.steam-rom-manager.png",
				"install -Dm644 srm_48.png /app/share/icons/hicolor/48x48/apps/com.steamgriddb.steam-rom-manager.png",
				"install -Dm644 srm_96.png /app/share/icons/hicolor/96x96/apps/com.steamgriddb.steam-rom-manager.png",
				"install -Dm644 srm_256.png /app/share/icons/hicolor/256x256/apps/com.steamgriddb.steam-rom-manager.png",
				"install -Dm644 srm_512.png /app/share/icons/hicolor/512x512/apps/com.steamgriddb.steam-rom-manager.png",
				"install -Dm644 com.steamgriddb.steam-rom-manager.appdata.xml -t /app/share/metainfo",
				"install -Dm644 com.steamgriddb.steam-rom-manager.desktop -t /app/share/applications",
				"install -D apply_extra -t /app/bin",
				"cp /usr/bin/ar /app/bin"
			],
			"sources": [
				{
					"type": "script",
					"dest-filename": "apply_extra",
					"commands": [
						"ar x srm.deb",
						"tar xf data.tar.xz",
						"mv \"opt/Steam ROM Manager\" steam-rom-manager",
						"rm -r srm.deb control.tar.* data.tar.xz debian-binary usr opt"
					]
				},
				{
					"type": "script",
					"dest-filename": "run.sh",
					"commands": [
						"/app/bin/zypak-wrapper.sh /app/extra/steam-rom-manager/steam-rom-manager"
					]
				},
				{
					"type": "file",
					"path": "com.steamgriddb.steam-rom-manager.appdata.xml"
				},
				{
					"type": "file",
					"path": "com.steamgriddb.steam-rom-manager.desktop"
				},
				{
					"type": "file",
					"dest-filename": "srm_16.png",
					"url": "https://github.com/SteamGridDB/steam-rom-manager/raw/master/src/assets/icons/16x16.png",
					"sha256": "1e0863c171b858b34d05cd4c35f28f8c647047c80fc01777c339b9fd56ec837c"
				},
				{
					"type": "file",
					"dest-filename": "srm_32.png",
					"url": "https://github.com/SteamGridDB/steam-rom-manager/raw/master/src/assets/icons/32x32.png",
					"sha256": "6868e84ea191375c38589413e187594c0215f2e02a3a162925cd3d3e811affc5"
				},
				{
					"type": "file",
					"dest-filename": "srm_48.png",
					"url": "https://github.com/SteamGridDB/steam-rom-manager/raw/master/src/assets/icons/48x48.png",
					"sha256": "06952b6111a45ccadc40a553c1963a07783f518b8fb85ed2bdee862fdd8dcd65"
				},
				{
					"type": "file",
					"dest-filename": "srm_96.png",
					"url": "https://github.com/SteamGridDB/steam-rom-manager/raw/master/src/assets/icons/96x96.png",
					"sha256": "3e96abc9f8e8852161e25c07f65fbbea17ff644e2377972b5440e640c964c745"
				},
				{
					"type": "file",
					"dest-filename": "srm_256.png",
					"url": "https://github.com/SteamGridDB/steam-rom-manager/raw/master/src/assets/icons/256x256.png",
					"sha256": "dfcef88c8e8b262f548c8d2799ff1f13e688bd0f710b5afdf780f9fc2686243b"
				},
				{
					"type": "file",
					"dest-filename": "srm_512.png",
					"url": "https://github.com/SteamGridDB/steam-rom-manager/raw/master/src/assets/icons/512x512.png",
					"sha256": "371dbd9c9dbee38018ad32cff823660c91407f6b23ac7eec7d8860f5f271daaa"
				},
				{
					"type": "extra-data",
					"filename": "srm.deb",
					"only-arches": [
						"x86_64"
					],
					"url": "https://github.com/SteamGridDB/steam-rom-manager/releases/download/v2.3.29/steam-rom-manager_2.3.29_amd64.deb",
					"sha256": "a16a53d764bcd4d3c4ec187c72997dd3e2a65f800a56e73ea0e55a321997aba2",
					"size": 75402134,
					"x-checker-data": {
						"type": "json",
						"url": "https://api.github.com/repos/SteamGridDB/steam-rom-manager/releases/latest",
						"url-query": ".assets[] | select(.name==\"steam-rom-manager_\" + $version + \"_amd64.deb\") | .browser_download_url",
						"version-query": ".tag_name"
					}
				}
			]
		}
	]
}
